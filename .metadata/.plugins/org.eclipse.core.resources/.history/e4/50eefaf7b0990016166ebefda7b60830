package com.celera.mongo.entity;

import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.json.Json;
import javax.json.JsonArrayBuilder;
import javax.json.JsonObject;
import javax.json.JsonObjectBuilder;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.data.annotation.Id;
import org.springframework.data.annotation.PersistenceConstructor;
import org.springframework.data.mongodb.core.mapping.Document;

import com.celera.mongo.repo.HedgeRepo;

//@Document(collection = "hedge")
public class Leg /*implements IMongoDocument<HedgeRepo>*/
{
	private static final Logger logger = LoggerFactory.getLogger(Leg.class); 
	
//	@Id
//	private String id;
	private String side = null;
	private Double qty = null;
	private Date expiry = null;
	private Double strike = null;
	private Double price = null;
	private Double premium = null;
	private String product = null;

//	private Date lastModified;

	public Leg()
	{
	}

	@PersistenceConstructor
	public Leg(String side, Double qty, Date expiry, Double strike, Double price, Double premium, String product)
	{
		this.side = side;
		this.qty = qty;
		this.expiry = expiry;
		this.strike = strike;
		this.price = price;
		this.premium = premium;
		this.product = product;
	}

//	@Override
//	public Class getRepo()
//	{
//		return HedgeRepo.class;
//	}

	public void setSide(String side)
	{
		this.side = side;
	}

	public void setQty(Double qty)
	{
		this.qty = qty;
	}

	public void setExpiry(Date expiry)
	{
		this.expiry = expiry;
	}

	public void setStrike(Double strike)
	{
		this.strike = strike;
	}

	public void setPrice(Double price)
	{
		this.price = price;
	}

	public void setPremium(Double premium)
	{
		this.premium = premium;
	}

	public void setProduct(String product)
	{
		this.product = product;
	}

	@Override
	public String toString()
	{
		return "Leg [side=" + side + ", qty=" + qty + ", expiry=" + expiry + ", strike=" + strike + ", price=" + price
				+ ", premium=" + premium + ", product=" + product + "]";
	}

	public JsonObject json()
	{
		JsonObjectBuilder builder = Json.createObjectBuilder();

		for (Field f : this.getClass().getDeclaredFields()) {
			try
			{
				Object o = f.get(this);
				if (o != null)
				{
					String name = f.getName();
					builder.add(name, o.toString());
				}
			} catch (IllegalArgumentException | IllegalAccessException e)
			{
				logger.error("", e);
			}
		}
		
//		builder.add("side", side).add("qty", qty).add("price", price).add("future", future);
		JsonObject object = builder.build();
		return object;
	}
}
