package com.celera.ipc;

import org.zeromq.ZMQ;

public class Miniserver implements Runnable
{
	ZMQ.Context ctx = ZMQ.context(1);
	ZMQ.Socket s = ctx.socket(ZMQ.REP);
	
	public Miniserver(){
		s.bind("tcp://127.0.0.1:6555");
	};

	@Override
	public void run()
	{
		for (int i = 0; i != 1000; i++)
		{
			byte[] data = s.recv(0);
			assert (data.length == 10);
			s.send(data, 0);
		}

		try
		{
			Thread.sleep(1000);
		} catch (InterruptedException e)
		{
			e.printStackTrace();
		}
	}
	
}